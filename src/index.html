<!DOCTYPE html>
<html lang='en' prefix="og:http://ogp.me/ns#">

  <head>
    <title>Greenwood Counter Example w/JSX</title>

    <meta charset='utf-8'>
    <meta name='description' content='Greenwood Counter Example w/JSX'/>
    <meta name='viewport' content='width=device-width, initial-scale=1'/>
    <meta name="description" content="A counter component example using Greenwood with WCC + JSX."/>
 
    <meta property="og:title" content="Greenwood Counter Example w/JSX" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://project-evergreen.thegreenhouse.io/todo-mvc/" />
    <meta property="og:image" content="https://www.greenwoodjs.io/assets/greenwood-logo-300w.png" />
    <meta property="og:description" content="A counter component example using Greenwood with WCC + JSX." />
    <meta name="twitter:site" content="@PrjEvergreen" />
    <meta name="twitter:creator" content="@PrjEvergreen" />

    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <style>
      * {
        font-family: 'Raleway', sans-serif;
        font-size: 1.1em;
      }

      main {
        width: 70%;
        text-align: center;
        margin: 0 auto;
      }
    </style>

    <script type="module" src="./components/counter/counter.jsx?type=jsx"></script>
    <script>
      let counter;
      let interval;

      function startIncrement() {
        interval = setInterval(() => {
          // TODO - counter depends on fine grained observability WIP
          // https://github.com/ProjectEvergreen/wcc/pull/110
          const next = parseInt(counter.getAttribute('count'), 10) + 1;

          counter.setAttribute('count', next);
        }, 3000);
      }

      function stopIncrement() {
        clearInterval(interval);
      }

      window.addEventListener('load', () => {
        counter = document.getElementsByTagName('wcc-counter')[0];

        counter.setAttribute('count', 0);

        document.getElementById('start').addEventListener('click', () => {
          startIncrement();
        });

        document.getElementById('stop').addEventListener('click', () => {
          stopIncrement();
        });

        document.getElementById('reset').addEventListener('click', () => {
          counter.setAttribute('count', 0);
        });
      })
    </script>
  </head>

  <body>
    <main>
      
      <h1>Counter</h1>
      <wcc-counter></wcc-counter>
      <button id="start">Start</button>
      <button id="stop">Stop</button>
      <button id="reset">Reset</button>
    </main>
  </body>

</html>